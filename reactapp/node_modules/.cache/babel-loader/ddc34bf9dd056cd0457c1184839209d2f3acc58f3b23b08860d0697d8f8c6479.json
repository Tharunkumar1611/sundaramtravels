{"ast":null,"code":"var _jsxFileName = \"D:\\\\8b67412f-8cf6-4d87-9832-a9ac015d5e57-ff5e7c35-52b6-4e83-b04c-b68610e3a721\\\\reactapp\\\\src\\\\components\\\\PlaceAutocomplete.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport '../styles/PlaceAutocomplete.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PlaceAutocomplete = ({\n  value,\n  onPlaceSelect,\n  placeholder = \"Search for a place...\"\n}) => {\n  _s();\n  const [searchQuery, setSearchQuery] = useState(value || '');\n  const [suggestions, setSuggestions] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const dropdownRef = useRef(null);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setShowDropdown(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // Debounced search function\n  useEffect(() => {\n    const delayDebounceFn = setTimeout(() => {\n      if (searchQuery.length >= 3) {\n        searchPlaces(searchQuery);\n      } else {\n        setSuggestions([]);\n        setShowDropdown(false);\n      }\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [searchQuery]);\n  const searchPlaces = async query => {\n    if (!query || query.length < 3) return;\n    setIsLoading(true);\n    try {\n      const response = await axios.get('https://nominatim.openstreetmap.org/search', {\n        params: {\n          q: query,\n          format: 'json',\n          limit: 8,\n          addressdetails: 1\n        },\n        headers: {\n          'User-Agent': 'TravelPlannerApp/1.0'\n        }\n      });\n      setSuggestions(response.data);\n      setShowDropdown(response.data.length > 0);\n    } catch (error) {\n      console.error('Error fetching places:', error);\n      setSuggestions([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleSelectPlace = place => {\n    const placeName = place.display_name;\n    const coordinates = `${place.lat}, ${place.lon}`;\n    setSearchQuery(placeName);\n    setShowDropdown(false);\n    setSuggestions([]);\n\n    // Call the parent callback with selected place data\n    if (onPlaceSelect) {\n      onPlaceSelect({\n        name: placeName,\n        coordinates: coordinates,\n        lat: place.lat,\n        lon: place.lon,\n        address: place.address\n      });\n    }\n  };\n  const handleInputChange = e => {\n    setSearchQuery(e.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"place-autocomplete\",\n    ref: dropdownRef,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"autocomplete-input-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"autocomplete-input\",\n        placeholder: placeholder,\n        value: searchQuery,\n        onChange: handleInputChange,\n        onFocus: () => {\n          if (suggestions.length > 0) {\n            setShowDropdown(true);\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uD83D\\uDD0D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), showDropdown && suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"autocomplete-dropdown\",\n      children: suggestions.map((place, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"autocomplete-item\",\n        onClick: () => handleSelectPlace(place),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"place-icon\",\n          children: \"\\uD83D\\uDCCD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"place-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"place-name\",\n            children: place.display_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"place-coords\",\n            children: [place.lat.substring(0, 8), \", \", place.lon.substring(0, 8)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 15\n        }, this)]\n      }, `${place.place_id}-${index}`, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this), showDropdown && suggestions.length === 0 && searchQuery.length >= 3 && !isLoading && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"autocomplete-dropdown\",\n      children: /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"autocomplete-item no-results\",\n        children: \"No places found. Try a different search term.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n_s(PlaceAutocomplete, \"8L2vnGuawgzHvYpS2uKGYmpg7Y8=\");\n_c = PlaceAutocomplete;\nexport default PlaceAutocomplete;\nvar _c;\n$RefreshReg$(_c, \"PlaceAutocomplete\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsxDEV","_jsxDEV","PlaceAutocomplete","value","onPlaceSelect","placeholder","_s","searchQuery","setSearchQuery","suggestions","setSuggestions","isLoading","setIsLoading","showDropdown","setShowDropdown","dropdownRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","delayDebounceFn","setTimeout","length","searchPlaces","clearTimeout","query","response","get","params","q","format","limit","addressdetails","headers","data","error","console","handleSelectPlace","place","placeName","display_name","coordinates","lat","lon","name","address","handleInputChange","e","className","ref","children","type","onChange","onFocus","fileName","_jsxFileName","lineNumber","columnNumber","map","index","onClick","substring","place_id","_c","$RefreshReg$"],"sources":["D:/8b67412f-8cf6-4d87-9832-a9ac015d5e57-ff5e7c35-52b6-4e83-b04c-b68610e3a721/reactapp/src/components/PlaceAutocomplete.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport '../styles/PlaceAutocomplete.css';\r\n\r\nconst PlaceAutocomplete = ({ value, onPlaceSelect, placeholder = \"Search for a place...\" }) => {\r\n  const [searchQuery, setSearchQuery] = useState(value || '');\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setShowDropdown(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  // Debounced search function\r\n  useEffect(() => {\r\n    const delayDebounceFn = setTimeout(() => {\r\n      if (searchQuery.length >= 3) {\r\n        searchPlaces(searchQuery);\r\n      } else {\r\n        setSuggestions([]);\r\n        setShowDropdown(false);\r\n      }\r\n    }, 500);\r\n\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchQuery]);\r\n\r\n  const searchPlaces = async (query) => {\r\n    if (!query || query.length < 3) return;\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await axios.get('https://nominatim.openstreetmap.org/search', {\r\n        params: {\r\n          q: query,\r\n          format: 'json',\r\n          limit: 8,\r\n          addressdetails: 1\r\n        },\r\n        headers: {\r\n          'User-Agent': 'TravelPlannerApp/1.0'\r\n        }\r\n      });\r\n\r\n      setSuggestions(response.data);\r\n      setShowDropdown(response.data.length > 0);\r\n    } catch (error) {\r\n      console.error('Error fetching places:', error);\r\n      setSuggestions([]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSelectPlace = (place) => {\r\n    const placeName = place.display_name;\r\n    const coordinates = `${place.lat}, ${place.lon}`;\r\n    \r\n    setSearchQuery(placeName);\r\n    setShowDropdown(false);\r\n    setSuggestions([]);\r\n\r\n    // Call the parent callback with selected place data\r\n    if (onPlaceSelect) {\r\n      onPlaceSelect({\r\n        name: placeName,\r\n        coordinates: coordinates,\r\n        lat: place.lat,\r\n        lon: place.lon,\r\n        address: place.address\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setSearchQuery(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"place-autocomplete\" ref={dropdownRef}>\r\n      <div className=\"autocomplete-input-wrapper\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"autocomplete-input\"\r\n          placeholder={placeholder}\r\n          value={searchQuery}\r\n          onChange={handleInputChange}\r\n          onFocus={() => {\r\n            if (suggestions.length > 0) {\r\n              setShowDropdown(true);\r\n            }\r\n          }}\r\n        />\r\n        {isLoading && (\r\n          <div className=\"loading-spinner\">\r\n            <span>üîç</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {showDropdown && suggestions.length > 0 && (\r\n        <ul className=\"autocomplete-dropdown\">\r\n          {suggestions.map((place, index) => (\r\n            <li\r\n              key={`${place.place_id}-${index}`}\r\n              className=\"autocomplete-item\"\r\n              onClick={() => handleSelectPlace(place)}\r\n            >\r\n              <div className=\"place-icon\">üìç</div>\r\n              <div className=\"place-details\">\r\n                <div className=\"place-name\">{place.display_name}</div>\r\n                <div className=\"place-coords\">\r\n                  {place.lat.substring(0, 8)}, {place.lon.substring(0, 8)}\r\n                </div>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n\r\n      {showDropdown && suggestions.length === 0 && searchQuery.length >= 3 && !isLoading && (\r\n        <ul className=\"autocomplete-dropdown\">\r\n          <li className=\"autocomplete-item no-results\">\r\n            No places found. Try a different search term.\r\n          </li>\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlaceAutocomplete;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}